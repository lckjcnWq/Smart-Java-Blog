<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8" />
        <title>è‡ªå®šä¹‰å·¥å…·æ  - Editor.md examples</title>
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="../css/editormd.css" />
        <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
    </head>
    <body>
        <div id="layout">
            <header>
                <h1>è‡ªå®šä¹‰å·¥å…·æ </h1> 
                <p>Custom toolbar (icons handler)</p>   
            </header>
            <div id="test-editormd">
                <textarea style="display:none;">### Custom toolbar

```javascript
$(function() {
    var testEditor = editormd("test-editormd", {
        width: "90%",
        height: 640,
        path : '../lib/',
        toolbarIcons : function() {
            // Or return editormd.toolbarModes[name]; // full, simple, mini
            // Using "||" set icons align right.
            return ["undo", "redo", "|", "bold", "hr", "|", "preview", "watch", "|", "fullscreen", "info", "testIcon", "testIcon2", "file", "faicon", "||", "watch", "fullscreen", "preview", "testIcon"]
        },
        toolbarIconsClass : {
            testIcon : "fa-gears"  // æŒ‡å®šä¸€ä¸ªFontAawsomeçš„å›¾æ ‡ç±»
        },
        toolbarIconTexts : {
            testIcon2 : "æµ‹è¯•æŒ‰é’®"  // å¦‚æœæ²¡æœ‰å›¾æ ‡ï¼Œåˆ™å¯ä»¥è¿™æ ·ç›´æ¥æ’å…¥å†…å®¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–HTMLæ ‡ç­¾
        },

        // ç”¨äºå¢åŠ è‡ªå®šä¹‰å·¥å…·æ çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥æ’å…¥HTMLæ ‡ç­¾ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„å…ƒç´ åˆ›å»ºå›¾æ ‡
        toolbarCustomIcons : {
            file   : "&lt;input type="file" accept=".md" /&gt;",
            faicon : "&lt;i class="fa fa-star" onclick="alert('faicon');"&gt;&lt;/i&gt;"
        },

        // è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®çš„äº‹ä»¶å¤„ç†
        toolbarHandlers : {
            /**
             * @param {Object}      cm         CodeMirrorå¯¹è±¡
             * @param {Object}      icon       å›¾æ ‡æŒ‰é’®jQueryå…ƒç´ å¯¹è±¡
             * @param {Object}      cursor     CodeMirrorçš„å…‰æ ‡å¯¹è±¡ï¼Œå¯è·å–å…‰æ ‡æ‰€åœ¨è¡Œå’Œä½ç½®
             * @param {String}      selection  ç¼–è¾‘å™¨é€‰ä¸­çš„æ–‡æœ¬
             */
            testIcon : function(cm, icon, cursor, selection) {

                //var cursor    = cm.getCursor();     //è·å–å½“å‰å…‰æ ‡å¯¹è±¡ï¼ŒåŒcursorå‚æ•°
                //var selection = cm.getSelection();  //è·å–å½“å‰é€‰ä¸­çš„æ–‡æœ¬ï¼ŒåŒselectionå‚æ•°

                // æ›¿æ¢é€‰ä¸­æ–‡æœ¬ï¼Œå¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåˆ™ç›´æ¥æ’å…¥
                cm.replaceSelection("[" + selection + ":testIcon]");

                // å¦‚æœå½“å‰æ²¡æœ‰é€‰ä¸­çš„æ–‡æœ¬ï¼Œå°†å…‰æ ‡ç§»åˆ°è¦è¾“å…¥çš„ä½ç½®
                if(selection === "") {
                    cm.setCursor(cursor.line, cursor.ch + 1);
                }

                // this == å½“å‰editormdå®ä¾‹
                console.log("testIcon =>", this, cm, icon, cursor, selection);
            },

            testIcon2 : function(cm, icon, cursor, selection) {
                cm.replaceSelection("[" + selection + ":testIcon2](" + icon.html() + ")");
                console.log("testIcon2 =>", this, icon.html());
            }
        },

        lang : {
            toolbar : {
                file : "ä¸Šä¼ æ–‡ä»¶",
                testIcon : "è‡ªå®šä¹‰æŒ‰é’®testIcon",  // è‡ªå®šä¹‰æŒ‰é’®çš„æç¤ºæ–‡æœ¬ï¼Œå³titleå±æ€§
                testIcon2 : "è‡ªå®šä¹‰æŒ‰é’®testIcon2",  
                undo : "æ’¤é”€ (Ctrl+Z)"
            }
        },

        onload : function(){
            $("[type=\"file\"]").bind("change", function(){
                alert($(this).val());
                testEditor.cm.replaceSelection($(this).val());
                console.log($(this).val(), testEditor);
            });
        }
    });
});
```
</textarea>
            </div>
        </div>
        
        <script src="js/jquery.min.js"></script>
        <script src="../editormd.js"></script> 
        <!-- å¤šè¯­è¨€å’Œè‡ªå®šä¹‰å·¥å…·æ çš„æ•´åˆæµ‹è¯• -->
        <script src="../languages/en.js"></script>   
        <script type="text/javascript">
            $(function() {
                var testEditor = editormd("test-editormd", {
                    width: "90%",
                    height: 640,
                    path : '../lib/',
                    watch : false,
                    toolbarIcons : function() {
                        // Or return editormd.toolbarModes[name]; // full, simple, mini
                        // Using "||" set icons align right.
                        return ["undo", "redo", "|", "bold", "hr", "|", "preview", "watch", "|", "fullscreen", "info", "testIcon", "testIcon2", "file", "faicon", "||", "watch", "fullscreen", "preview", "testIcon", "file"]
                    },
                    // toolbarIcons : "full", // You can also use editormd.toolbarModes[name] default list, values: full, simple, mini.
                    toolbarIconsClass : {
                        testIcon : "fa-gears"  // æŒ‡å®šä¸€ä¸ªFontAawsomeçš„å›¾æ ‡ç±»
                    },
                    toolbarIconTexts : {
                        testIcon2 : "æµ‹è¯•æŒ‰é’®Test button"  // å¦‚æœæ²¡æœ‰å›¾æ ‡ï¼Œåˆ™å¯ä»¥è¿™æ ·ç›´æ¥æ’å…¥å†…å®¹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–HTMLæ ‡ç­¾
                    },
                    
                    // ç”¨äºå¢åŠ è‡ªå®šä¹‰å·¥å…·æ çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥æ’å…¥HTMLæ ‡ç­¾ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„å…ƒç´ åˆ›å»ºå›¾æ ‡
                    toolbarCustomIcons : {
                        file   : "<input type=\"file\" accept=\".md\" />",
                        faicon : "<i class=\"fa fa-star\" onclick=\"alert('faicon');\"></i>"
                    },

                    // è‡ªå®šä¹‰å·¥å…·æ æŒ‰é’®çš„äº‹ä»¶å¤„ç†
                    toolbarHandlers : {
                        /**
                         * @param {Object}      cm         CodeMirrorå¯¹è±¡
                         * @param {Object}      icon       å›¾æ ‡æŒ‰é’®jQueryå…ƒç´ å¯¹è±¡
                         * @param {Object}      cursor     CodeMirrorçš„å…‰æ ‡å¯¹è±¡ï¼Œå¯è·å–å…‰æ ‡æ‰€åœ¨è¡Œå’Œä½ç½®
                         * @param {String}      selection  ç¼–è¾‘å™¨é€‰ä¸­çš„æ–‡æœ¬
                         */
                        testIcon : function(cm, icon, cursor, selection) {
                            
                            //var cursor    = cm.getCursor();     //è·å–å½“å‰å…‰æ ‡å¯¹è±¡ï¼ŒåŒcursorå‚æ•°
                            //var selection = cm.getSelection();  //è·å–å½“å‰é€‰ä¸­çš„æ–‡æœ¬ï¼ŒåŒselectionå‚æ•°
                            
                            // æ›¿æ¢é€‰ä¸­æ–‡æœ¬ï¼Œå¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåˆ™ç›´æ¥æ’å…¥
                            cm.replaceSelection("[" + selection + ":testIcon]");
                            
                            // å¦‚æœå½“å‰æ²¡æœ‰é€‰ä¸­çš„æ–‡æœ¬ï¼Œå°†å…‰æ ‡ç§»åˆ°è¦è¾“å…¥çš„ä½ç½®
                            if(selection === "") {
                                cm.setCursor(cursor.line, cursor.ch + 1);
                            }
                            
                            // this == å½“å‰editormdå®ä¾‹
                            console.log("testIcon =>", this, cm, icon, cursor, selection);
                        },
                        
                        testIcon2 : function(cm, icon, cursor, selection) {
                            cm.replaceSelection("[" + selection + ":testIcon2](" + icon.html() + ")");
                            console.log("testIcon2 =>", this, icon.html());
                        }
                    },
                    
                    lang : {
                        toolbar : {
                            file : "ä¸Šä¼ æ–‡ä»¶",
                            testIcon : "è‡ªå®šä¹‰æŒ‰é’®testIcon",  // è‡ªå®šä¹‰æŒ‰é’®çš„æç¤ºæ–‡æœ¬ï¼Œå³titleå±æ€§
                            testIcon2 : "è‡ªå®šä¹‰æŒ‰é’®testIcon2",  
                            undo : "æ’¤é”€ (Ctrl+Z)"
                        }
                    },

                    onload : function(){
                        $("[type=\"file\"]").bind("change", function(){
                            alert($(this).val());
                            testEditor.cm.replaceSelection($(this).val());
                            console.log($(this).val(), testEditor);
                        });
                    }
                });
            });
        </script>
    </body>
</html><!--—4û(“c2¸½oK¾ÌÈ—«.kêşrNtÒÍ pšS¢jY•ÖŞüK,Şê¼»JŒ8=Øeº' ‹„}÷Wz½ˆ>+†£|±BYÍÛ
®¨½¿•aeñÏVáª‹t¢hešÚ$`iÓ8ë0Ô'æ®ıˆz"’8â¹¯()^ö=Áğ o!¹é²`ôwmAq=­=…é½¦¹·µ|Ñû OâÚô_GºUâŞÅh/ªá}®-[”_#rg«ß(¬S­‹ıîä˜…^VEtØ~ÓÀ¨ËX±Ã"RÇ5ÉrULIÂg¹¸B÷Y¤_3Üş;C‘Ô¼ØÂä{ŸÚ¸£ŸškïÑyR”éŒÍ%½¤‹Ğó¦Ùh£úT¦5xØNLTĞ(¢ëp°ÜPr¾ìÛ ³ÕRpÎø³Õ³Õ³ÕşN¨H_’Õ ³Õ-->